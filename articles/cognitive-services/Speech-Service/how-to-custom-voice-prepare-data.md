---
title: 如何为自定义语音语音服务准备数据
titleSuffix: Azure Cognitive Services
description: 使用语音服务为品牌创建自定义语音。 提供了工作室录制和关联的脚本, 服务会生成一个独特的语音模型, 该模型经过了录音。 在您的产品、工具和应用程序中使用此语音合成语音。
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 07/05/2019
ms.author: erhopf
ms.openlocfilehash: 8b4b5553605042499a9a8f3343ac4e6678e7006f
ms.sourcegitcommit: 36e9cbd767b3f12d3524fadc2b50b281458122dc
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/20/2019
ms.locfileid: "69640426"
---
# <a name="prepare-data-to-create-a-custom-voice"></a>准备数据以创建自定义语音

准备好为应用程序创建自定义的文本到语音转换时, 第一步是收集音频录制和关联的脚本, 开始训练语音模型。 服务使用此数据创建一个唯一的语音优化, 以匹配录制中的语音。 训练语音后, 可以在应用程序中启动综合 speech。

您可以开始使用少量数据来创建概念证明。 但是, 您提供的数据越多, 您的自定义声音就会听起来就越自然。 在训练自己的文本到语音转换语音模型之前, 需要录音和关联的文本转录。 在此页上, 我们将查看数据类型、它们的使用方式以及如何管理每个数据类型。

## <a name="data-types"></a>数据类型

"语音训练" 数据集包括音频录制和一个带有关联转录的文本文件。 每个音频文件应包含单一查询文本 (对话系统的单个句子或单车), 长度不能超过15秒。

在某些情况下, 您可能没有准备好适当的数据集, 并希望使用可用的音频文件 (短或长时间, 带有或不带脚本) 测试自定义的语音训练。 我们提供工具 (beta), 帮助你将音频分段到最谈话, 并使用批处理脚本[API](batch-transcription.md)准备脚本。

此表列出了数据类型, 以及如何使用每种类型来创建自定义的文本到语音转换语音模型。

| 数据类型 | 描述 | 使用时机 | 需要其他服务 | 用于定型模型的数量 | 区域设置 |
| --------- | ----------- | ----------- | --------------------------- | ----------------------------- | --------- |
| **单个最谈话 + 匹配脚本** | 作为单个最谈话的音频文件的集合 (.zip)。 每个音频文件的长度应不超过15秒, 并与格式化的脚本 (.txt) 配对。 | 具有匹配脚本的专业录制 | 准备进行培训。 | 对于 en-us 和 zh-chs, 无需硬性要求。 对于其他区域设置, 超过 2000 + 个不同的最谈话。 | 所有自定义语音区域设置 |
| **长音频 + 脚本 (beta)** | Long、unsegmented 音频文件的集合 (.zip), 与包含所有口述单词的脚本 (.txt) 配对。 | 具有音频文件和匹配的脚本, 但不会将它们分段到最谈话中。 | 分段 (使用批处理脚本)。<br>需要时的音频格式转换。 | 对于 en-us 和 zh-chs, 无需硬性要求。 | `en-US` 和 `zh-CN` |
| **仅音频 (beta)** | 不带脚本的音频文件的集合 (.zip)。 | 只有音频文件可用, 无需脚本。 | 分段 + 脚本生成 (使用批处理脚本)。<br>需要时的音频格式转换。| `en-US` 和`zh-CN`没有硬性要求。 | `en-US` 和 `zh-CN` |

文件应按类型分组, 并上传为 zip 文件。 每个数据集只能包含一种数据类型。

> [!NOTE]
> 每个订阅允许导入的数据集的最大数目为10个 .zip 文件 (对于免费订阅 (F0) 用户) 和 500 (对于标准订阅 (S0) 用户)。

## <a name="individual-utterances--matching-transcript"></a>单个最谈话 + 匹配脚本

您可以通过两种方式准备单独的最谈话和匹配脚本的录制。 编写脚本并使其由语音人才读取, 或使用公开提供的音频, 并将其转录为文本。 如果是后一种情况，请编辑音频文件中的不流畅之处，例如“嗯”之类的无意义声音、口吃音、喃喃自语或错读音。

若要生成良好的语音字体, 请在具有高质量麦克风的静房间中创建录制。 一致的音量、说话率、说话和 mannerisms 的语音都非常重要。

> [!TIP]
> 若要创建生产用的语音，建议使用专业录音棚和语音专家。 有关详细信息，请参阅[如何录制自定义语音的语音示例](record-custom-voice-samples.md)。

### <a name="audio-files"></a>音频文件

每个音频文件应该包含一个查询文本 (一个句子或一轮对话框系统), 长度不超过15秒。 所有文件必须采用相同的口述语言。 不支持多语言自定义文本到语音转换, 这种语言的语言除外。 每个音频文件必须具有唯一的文件名扩展名为 .wav 的数字文件名。

准备音频时, 请遵循这些指导原则。

| 属性 | ReplTest1 |
| -------- | ----- |
| 文件格式 | RIFF (.wav), 分组为 .zip 文件 |
| 采样率 | 至少 16000 Hz |
| 示例格式 | PCM，16 位 |
| 文件名 | Numeric, 扩展名为 .wav。 不允许使用重复的文件名。 |
| 音频长度 | 短于15秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

> [!NOTE]
> 采样率低于 16000 Hz 的 .wav 文件将被拒绝。 如果 .zip 文件包含具有不同采样速率的 .wav 文件, 则将仅导入等于或高于 16000 Hz 的 .wav 文件。 门户目前可以导入的 .zip 存档最多只能为 200 MB。 但是，可以上传多个存档。

### <a name="transcripts"></a>脚本

脚本文件是一个纯文本文件。 使用这些准则来准备你的转录。

| 属性 | ReplTest1 |
| -------- | ----- |
| 文件格式 | 纯文本 (.txt) |
| 编码格式 | ANSI/ASCII, UTF-8, UTF-8-BOM, UTF-16-LE, 或 UTF-16 是。 对于 zh-chs-不支持 ANSI/ASCII 和 UTF-8 编码。 |
| 每行的话语数 | **一**-脚本文件的每一行都应该包含一个音频文件的名称, 后跟相应的脚本。 文件名和听录应以制表符 (\t) 分隔。 |
| 文件大小上限 | 50 MB |

下面的示例演示如何在一个 .txt 文件中以查询文本的形式组织这些脚本:

```
0000000001[tab] This is the waistline, and it's falling.
0000000002[tab] We have trouble scoring.
0000000003[tab] It was Janet Maslin.
```
这一点很重要, 那就是相应音频转录的 100% 准确。 脚本中的错误会在训练期间产生质量损失。

> [!TIP]
> 生成 "生产文本到语音" 声音时, 请选择 "最谈话" (或 "编写脚本"), 这会考虑拼音覆盖和效率。 无法获得所需的结果？ [请联系自定义语音](mailto:speechsupport@microsoft.com)团队了解有关我们的详细信息。

## <a name="long-audio--transcript-beta"></a>长音频 + 脚本 (beta)

在某些情况下, 可能没有可用的分段音频。 我们通过自定义语音门户提供服务 (beta), 帮助你分段长音频文件和创建转录。 请记住, 此服务将按语音到文本订阅的使用情况收费。

> [!NOTE]
> 长时间音频分段服务将利用语音到文本的批脚本功能, 该功能仅支持标准订阅 (S0) 用户。 在处理分段时, 还会将音频文件和脚本发送到自定义语音服务, 以优化识别模式, 以便为数据改进准确性。 在此过程中不会保留数据。 完成分段后, 只会为您的下载和培训存储最谈话分段及其映射脚本。

### <a name="audio-files"></a>音频文件

为分段准备音频时, 请遵循以下准则。

| 属性 | ReplTest1 |
| -------- | ----- |
| 文件格式 | RIFF (.wav), 其采样率至少为 16 khz 16 位 (在 PCM 中) 或 mp3, 比特率至少为 256 KBps, 按 .zip 文件分组 |
| 文件名 | 仅 ASCII 字符。 名称中的 Unicode 字符将失败 (例如, 中文字符或符号 "-")。 不允许重复的名称。 |
| 音频长度 | 超过20秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

所有音频文件都应该组合到一个 zip 文件中。 可以将 .wav 文件和 mp3 文件放入一个音频 zip, 但 zip 文件中不允许有子文件夹。 例如, 你可以上传包含名为 "kingstory" 的音频文件的 zip 文件 45, 该文件包含一个名为 "" 的文件, 其中包含一个名为 "queenstory" 的名为 "" 的文件 200, 其中一个名为 "", 不包含任何子文件夹。 处理后, 所有 mp3 文件都将转换为 .wav 格式。

### <a name="transcripts"></a>脚本

必须为此表中列出的规范准备脚本。 每个音频文件必须与脚本匹配。

| 属性 | ReplTest1 |
| -------- | ----- |
| 文件格式 | 分组为 .zip 的纯文本 (.txt) |
| 文件名 | 使用与匹配的音频文件相同的名称 |
| 编码格式 | 仅 UTF-8-BOM |
| 每行的话语数 | 无限制 |
| 文件大小上限 | 50 MB |

此数据类型中的所有脚本文件都应组合到一个 zip 文件中。 Zip 文件中不允许有子文件夹。 例如, 你上传了一个 zip 文件, 其中包含名为 "kingstory"、45秒长的音频文件, 另一个名为 "queenstory", 200 秒长的文件。 需要上传另一个包含两个脚本 (一个名为 "kingstory", 另一个名为 "queenstory") 的 zip 文件。 在每个纯文本文件中, 你将为匹配的音频提供完全正确的脚本。

成功上传数据集后, 我们将帮助你根据提供的脚本将音频文件分段到最谈话中。 可以通过下载数据集来检查分段的最谈话和匹配的脚本。 唯一 Id 将自动分配给分段的最谈话。 务必确保你提供的脚本的准确性为 100%。 脚本中的错误可以在音频分段期间降低准确性, 并在以后出现的训练阶段中进一步引入质量损失。

## <a name="audio-only-beta"></a>仅音频 (beta)

如果音频记录没有转录, 请使用 "**仅音频**" 选项上传数据。 我们的系统可以帮助你分段和转录你的音频文件。 请记住, 此服务将计入语音到文本订阅的使用情况。

准备音频时, 请遵循这些指导原则。

> [!NOTE]
> 长时间音频分段服务将利用语音到文本的批脚本功能, 该功能仅支持标准订阅 (S0) 用户。

| 属性 | ReplTest1 |
| -------- | ----- |
| 文件格式 | RIFF (.wav), 其采样率至少为 16 khz 16 位 (在 PCM 中) 或 mp3, 比特率至少为 256 KBps, 按 .zip 文件分组 |
| 文件名 | 仅 ASCII 字符。 名称中的 Unicode 字符将失败 (例如, 中文字符或符号 "-")。 不允许重复的名称。 |
| 音频长度 | 超过20秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

所有音频文件都应该组合到一个 zip 文件中。 Zip 文件中不允许有子文件夹。 成功上传数据集后, 我们将帮助你根据语音批处理脚本服务将音频文件分段到最谈话中。 唯一 Id 将自动分配给分段的最谈话。 匹配的脚本将通过语音识别生成。 处理后, 所有 mp3 文件都将转换为 .wav 格式。 可以通过下载数据集来检查分段的最谈话和匹配的脚本。

## <a name="next-steps"></a>后续步骤

- [创建自定义语音](how-to-custom-voice-create-voice.md)
- [向导记录语音示例](record-custom-voice-samples.md)

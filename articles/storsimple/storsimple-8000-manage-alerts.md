---
title: 查看和管理 StorSimple 8000 系列设备的警报 | Microsoft Docs
description: 介绍了 StorSimple 警报条件和严重性、如何配置警报通知，以及如何使用 StorSimple 设备管理器服务管理警报。
services: storsimple
documentationcenter: NA
author: alkohli
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 03/14/2019
ms.author: alkohli
ms.openlocfilehash: c3be0cdf2ef33c26dfa9d177e9b34f808b1b862a
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/13/2019
ms.locfileid: "60320308"
---
# <a name="use-the-storsimple-device-manager-service-to-view-and-manage-storsimple-alerts"></a>使用 StorSimple 设备管理器服务查看和管理 StorSimple 警报

## <a name="overview"></a>概述

使用 StorSimple 设备管理器服务中的“警报”  边栏选项卡，可以实时查看和清除与 StorSimple 设备相关的警报。 通过此边栏选项卡，可以集中监视 StorSimple 设备和整个 Microsoft Azure StorSimple 解决方案的运行状况问题。

本教程介绍常见的警报条件、警报严重性级别及如何配置警报通知。 此外，还介绍了警报快速参考表，可在其中快速找到特定的警报并做出适当的响应。

![“警报”页](./media/storsimple-8000-manage-alerts/configure-alerts-email11.png)

## <a name="common-alert-conditions"></a>常见警报条件

StorSimple 设备可在响应各种条件时生成警报。 以下是最常见类型的警报条件：

* **硬件问题** – 这些警报告知硬件的运行状况。 通过这些警报，可以知道是否需要进行固件升级、网络接口是否存在问题，或者某个数据驱动器是否有问题。
* **连接问题** – 传输数据遇到困难时，会生成这些警报。 通信问题可能会在向 Azure 存储帐户往来传输数据时遇到，也可能是由于设备与 StorSimple 设备管理器服务断开连接所致。 由于故障点众多，通信问题属于修复难度最大的问题。 在继续进行更高级的故障排除之前，始终应该先验证网络连接和 Internet 访问是否可用。 有关故障排除的帮助，请转到[使用 Test-Connection cmdlet 进行故障排除](storsimple-8000-troubleshoot-deployment.md)。
* **性能问题** - 当系统未在最佳状态下运行时（例如在高负载下运行），会导致这些警报。

此外，还可能会看到与安全、更新或作业失败相关的警报。

## <a name="alert-severity-levels"></a>警报严重级别

警报具有不同的严重级别，具体取决于警报情况将产生的影响，以及对警报响应的需要。 严重级别包括：

* **关键** - 当出现影响系统成功运行的条件时，将生成此类警报。 必须采取措施，确保 StorSimple 服务不会中断。
* **警告** - 如果得不到解决，此类条件可能变成关键级别。 应针对这种情况进行调查，并采取任何必要的措施来解决问题。
* **信息** – 此类警报包含可用于跟踪和管理系统的信息。

## <a name="configure-alert-settings"></a>配置警报设置

可以选择是否想要通过电子邮件接收有关每个 StorSimple 设备的警报条件的通知。 此外，可以指定其他警报通知收件人，方法是在“其他电子邮件收件人”框中输入其电子邮件地址并用分号分隔。 

> [!NOTE]
> 最多可为每个设备输入 20 个电子邮件地址。

为设备启用电子邮件通知后，每次发生关键警报时，通知列表成员都将收到电子邮件消息。 将从发送消息*storsimple 警报 noreply\@mail.windowsazure.com*并描述警报条件。 收件人可以单击“取消订阅”将自己从电子邮件通知列表中删除。 

#### <a name="to-enable-email-notification-of-alerts-for-a-device"></a>为设备启用警报电子邮件通知
1. 转到 StorSimple Device Manager 服务。 从设备列表中，选择并单击要配置的设备。
2. 依次转到设备的“设置”   > “常规”  。

   ![“警报”边栏选项卡](./media/storsimple-8000-manage-alerts/configure-alerts-email2.png)
   
2. 在“常规设置”  边栏选项卡中，转到“警报设置”  ，并设置以下项：
   
   1. 在“发送电子邮件通知”字段中选择“是”。  
   2. 若要让服务管理员和所有协同管理员接收警报通知，请在“电子邮件服务管理员”  字段中选择“是”  。
   3. 在“其他电子邮件收件人”  字段中，输入应接收警报通知的所有其他收件人的电子邮件地址。 输入名称的格式*有人\@somewhere.com*。 使用分号分隔电子邮件地址。 对于每个设备，最多可以配置 20 个电子邮件地址。 
      
3. 若要发送测试电子邮件通知，请单击“发送测试电子邮件”  。 StorSimple Device Manager 服务在转发测试通知时会显示状态消息。

    ![警报设置](./media/storsimple-8000-manage-alerts/configure-alerts-email3.png)

4. 将在测试电子邮件发送后看到通知。 
   
    ![警报测试通知电子邮件已发送](./media/storsimple-8000-manage-alerts/configure-alerts-email4.png)
   
   > [!NOTE]
   > 如果无法发送测试通知邮件，StorSimple 设备管理器服务会显示相应的错误消息。 请先等待几分钟，再重试发送测试通知邮件。 

5. 完成配置后，立即单击“保存”  。 出现确认提示时，单击“是”  。

     ![警报测试通知电子邮件已发送](./media/storsimple-8000-manage-alerts/configure-alerts-email5.png)

## <a name="view-and-track-alerts"></a>查看和跟踪警报

在 StorSimple 设备管理器服务摘要边栏选项卡上，可快速概览设备上的警报数量（按严重性级别排列）。

![“警报”仪表板](./media/storsimple-8000-manage-alerts/device-summary4.png)

单击严重性级别可打开“警报”  边栏选项卡。 结果仅包括与该严重级别匹配的警报。

单击列表中的警报可提供有关警报的更多详细信息，包括上次报告警报的时间、警报在设备上出现的次数、解决警报问题的建议操作。 如果是硬件警报，还将标识硬件组件。

![硬件警报示例](./media/storsimple-8000-manage-alerts/configure-alerts-email14.png)

如果需要将信息发送到 Microsoft 支持部门，可将警报详细信息复制到文本文件。 遵循建议清除本地警报条件后，应在“警报”  边栏选项卡中选择警报，并单击“清除”  ，将警报从设备中清除。 要清除多个警报，请选择每个警报，单击除“警报”列以外的所有列，并在选择要清除的所有警报之后单击“清除”。   请注意，当问题解决后或者当系统使用新信息更新警报后，某些警报会自动清除。

单击“清除”时，可以提供有关警报的注释，以及采用的解决问题的步骤。  如果新信息触发另一个事件，系统将清除某些事件。 在此情况下，会显示以下消息。

![清除警报消息](./media/storsimple-manage-alerts/admin_alerts_system_clear.png)

## <a name="sort-and-review-alerts"></a>排序和查看警报

运行警报报告以分组查看和清除警报可能更有效率。 此外，“警报”  边栏选项卡最多可显示 250 个警报。 如果超过该警报数目，默认视图中不一定会显示所有警报。 可以结合以下字段来自定义要显示的通知：

* **状态** - 可以显示“活动”  或“已清除”  的警报。 活动警报仍在系统上触发，而已清除的警报已由管理员手动清除，或由于系统以新信息更新警报条件而以编程方式清除。
* **严重性** – 可以显示所有严重级别（关键、警告、信息）的警报，或只显示特定严重性的警报，例如只显示关键警报。
* **源** – 可以显示来自所有源的警报，或只显示来自服务或者某一个或所有设备的警报。
* **时间范围** – 可以指定“从”和“到”日期时间戳，查看所需时段内的警报。  

![警报列表](./media/storsimple-8000-manage-alerts/configure-alerts-email11.png)

## <a name="alerts-quick-reference"></a>警报快速参考

下表列出了可能会遇到的一些 Microsoft Azure StorSimple 警报，以及适用的其他信息和建议。 StorSimple 设备警报划分为以下类别之一：

* [云连接警报](#cloud-connectivity-alerts)
* [群集警报](#cluster-alerts)
* [灾难恢复警报](#disaster-recovery-alerts)
* [硬件警报](#hardware-alerts)
* [作业失败警报](#job-failure-alerts)
* [本地固定卷警报](#locally-pinned-volume-alerts)
* [网络警报](#networking-alerts)
* [性能警报](#performance-alerts)
* [安全警报](#security-alerts)
* [支持包警报](#support-package-alerts)

### <a name="cloud-connectivity-alerts"></a>云连接警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 无法与 <*云凭据名称*> 建立连接。 |无法连接到存储帐户。 |与设备的连接似乎有问题。 请在设备上使用适用于 StorSimple 的 Windows PowerShell 界面运行 `Test-HcsmConnection` cmdlet 来识别并修复问题。 如果设置正确，则原因可能是引发警报的存储帐户的凭据存在问题。 在这种情况下，请使用 `Test-HcsStorageAccountCredential` cmdlet 确定是否出现了可以解决的问题。<ul><li>检查网络设置。</li><li>检查存储帐户凭据。</li></ul> |
| 在过去 <*数字*> 分钟内，我们未从设备收到检测信号。 |无法连接到设备。 |与设备的连接似乎有问题。 请在设备上使用适用于 StorSimple 的 Windows PowerShell 界面运行 `Test-HcsmConnection` cmdlet 来识别并修复问题，或者联系网络管理员。 |

### <a name="storsimple-behavior-when-cloud-connectivity-fails"></a>云连接失败时的 StorSimple 行为

如果云连接失败，生产环境中运行的 StorSimple 设备会发生什么情况？

如果 StorSimple 生产设备的云连接失败，根据设备状态，可能会发生以下情况：

* **在设备上的本地数据**:了一段时间，将不会中断，读取将继续提供服务。 但是，当未完成的 IO 数量增多并超过限制时，读取可能失败。

    根据设备上的数据量，云连接中断后的数小时内仍可持续写入。 写入速度逐渐变慢，最终在云连接中断数小时后失败。 （设备上配置了临时存储，用于保存要推送到云的数据。 发送数据后，此区域会被清空。 如果连接失败，此存储区域中的数据不会推送到云中，并且 IO 会失败。）
* **在云中的数据**:对于大多数云连接错误，返回错误。 一旦连接还原，IO 就会恢复，用户无需将卷联机。 在极少数情况下，可能需要用户干预，才能通过 Azure 门户让卷重新处于联机状态。
* **正在进行中的云快照的**:4-5 小时内多次重试该操作，如果连接未还原，云快照会失败。

### <a name="cluster-alerts"></a>群集警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 设备已故障转移到 <*设备名称*>。 |设备处于维护模式。 |设备由于进入或退出维护模式而故障转移。 这是正常情况，无需采取任何措施。 在确认此警报后，请从警报页中将它清除。 |
| 设备已故障转移到 <*设备名称*>。 |刚刚更新了设备固件或软件。 |由于更新而发生群集故障转移。 这是正常情况，无需采取任何措施。 在确认此警报后，请从警报页中将它清除。 |
| 设备已故障转移到 <*设备名称*>。 |控制器已关闭或重新启动。 |由于管理员关闭或重新启动了主动控制器，设备已故障转移。 无需采取任何措施。 在确认此警报后，请从警报页中将它清除。 |
| 设备已故障转移到 <*设备名称*>。 |计划内故障转移 |确认这是否为计划内故障转移。 采取相应的措施后，请从警报页中清除此警报。 |
| 设备已故障转移到 <*设备名称*>。 |计划外故障转移 |StorSimple 可以从计划外故障转移中自动恢复。 如果看到许多这样的警报，请联系 Microsoft 支持。 |
| 设备已故障转移到 <*设备名称*>。 |其他/未知原因。 |如果看到许多这样的警报，请联系 Microsoft 支持。 解决问题之后，请从警报页中清除此警报。 |
| 关键设备服务将状态报告为失败。 |数据路径服务失败。 |请联系 Microsoft 支持获取帮助。 |
| 网络接口 <*DATA #* > 的虚拟 IP 地址将状态报告为失败。 |其他/未知原因。 |有时，临时性的情况可能会导致生成这些警报。 如果是这样，此警报会在一段时间后自动清除。 如果问题仍然存在，请与 Microsoft 支持部门联系。 |
| 网络接口 <*DATA #* > 的虚拟 IP 地址将状态报告为失败。 |接口名称：<*DATA #* > IP 地址 `<IP address>` 无法联机，因为在网络上检测到重复的 IP 地址。 |确保从网络中删除重复的 IP 地址或使用不同的 IP 地址重新配置接口。 |

### <a name="disaster-recovery-alerts"></a>灾难恢复警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 恢复操作无法还原此服务的所有设置。 某些设备的设备配置数据处于不一致状态。 |灾难恢复后检测到数据不一致情况。 |服务中的加密数据与服务上的数据不同步。 通过 StorSimple 设备管理器授权设备 <设备名称  >，启动同步过程。 在设备 <*设备名称*> 上使用适用于 StorSimple 的 Windows PowerShell 界面运行 `Restore-HcsmEncryptedServiceData` cmdlet 并提供旧密码作为此 cmdlet 的输入，还原安全配置文件。 然后运行 `Invoke-HcsmServiceDataEncryptionKeyChange` cmdlet 更新服务数据加密密钥。 采取相应的措施后，请从警报页中清除此警报。 |

### <a name="hardware-alerts"></a>硬件警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 硬件组件 <*组件 ID*> 将状态报告为 <*状态*>。 | |有时，临时性的情况可能会导致生成这些警报。 如果是这样，此警报会在一段时间后自动清除。 如果问题持续出现，请联系 Microsoft 支持。 |
| 被动控制器故障。 |被动（辅助）控制器未正常运行。 |设备正在运行，但某个控制器有故障。 尝试重新启动该控制器。 如果未解决问题，请联系 Microsoft 支持。 |

### <a name="job-failure-alerts"></a>作业失败警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 备份 <*源卷组 ID*> 失败。 |备份作业失败。 |连接问题可能会导致无法成功完成备份操作。 如果没有连接问题，则表示可能达到了最大备份数目。 请删除不再需要的任何备份，并重试操作。 采取相应的措施后，请从警报页中清除此警报。 |
| 将 <*源备份元素 ID*> 克隆到 <*目标卷序列号*> 失败。 |克隆作业失败。 |刷新备份列表，验证备份是否仍然有效。 如果备份有效，则可能是云连接问题导致克隆操作无法成功完成。 如果没有连接问题，则表示可能达到了存储限制。 请删除不再需要的任何备份，并重试操作。 采取相应措施解决该问题后，请从警报页中清除此警报。 |
| 还原 <*源备份元素 ID*> 失败。 |还原作业失败。 |刷新备份列表，验证备份是否仍然有效。 如果备份有效，则可能是云连接问题导致还原操作无法成功完成。 如果没有连接问题，则表示可能达到了存储限制。 请删除不再需要的任何备份，并重试操作。 采取相应措施解决该问题后，请从警报页中清除此警报。 |

### <a name="locally-pinned-volume-alerts"></a>本地固定卷警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 创建本地卷 <*卷名称*> 失败。 |卷创建作业失败。< <失败错误代码对应的错误消息  >。 |连接问题可能会导致无法成功完成空间创建操作。 本地固定卷是丰富预配的，创建空间的过滤涉及到将分层卷分层到云中。 如果连接没有问题，则可能是已用完设备上的本地空间。 在重试此操作之前，请确定设备上是否还有空间。 |
| 扩展本地卷 <*卷名称*> 失败。 |由于 <*对应于失败错误代码的错误消息*>，卷修改作业失败。 |连接问题可能会导致无法成功完成卷扩展操作。 本地固定卷是丰富预配的，扩展现有空间的过滤涉及到将分层卷分层到云中。 如果连接没有问题，则可能是已用完设备上的本地空间。 在重试此操作之前，请确定设备上是否还有空间。 |
| 转换卷 <*卷名称*> 失败。 |将卷类型从本地固定转换为分层的转换作业失败。 |无法完成将类型从本地固定转换为分层的卷转换过程。 确保没有任何连接问题导致操作无法成功完成。 若要排查连接问题，请转到[使用 Test-HcsmConnection cmdlet 进行故障排除](storsimple-8000-troubleshoot-deployment.md#troubleshoot-with-the-test-hcsmconnection-cmdlet)。<br>由于本地固定卷中的某些数据已在转换期间分层到云中，原始本地固定卷现已标记为分层卷。 最终的分层卷仍占用设备上无法回收供将来本地卷使用的本地空间。<br>解决所有连接问题、清除警报并将此卷转换回原始本地固定卷类型，确保所有数据可再次在本地使用。 |
| 转换卷 <*卷名称*> 失败。 |将卷类型从分层转换为本地固定的转换作业失败。 |无法完成将类型从分层转换为本地固定的卷转换过程。 确保没有任何连接问题导致操作无法成功完成。 若要排查连接问题，请转到[使用 Test-HcsmConnection cmdlet 进行故障排除](storsimple-8000-troubleshoot-deployment.md#troubleshoot-with-the-test-hcsmconnection-cmdlet)。<br>在转换过程中，现已标记为本地固定卷的原始分层卷继续在云中保留数据，而设备上为此卷丰富预配的空间不再回收供将来的本地卷使用。<br>解决所有连接问题、清除警报并将此卷还原为原始分层卷类型，确保可回收设备上丰富预配的本地空间。 |
| 接近 <*卷组名称*> 本地快照的本地空间使用量 |备份策略的本地快照可能很快就会耗尽空间，并且会失效以免主机写入失败。 |在与此备份策略组关联的卷中，频繁创建本地快照和数据频繁进出导致设备上的本地空间很快耗尽。 删除不再需要的所有本地快照。 此外，将此备份策略的本地快照计划更新为以较低的频率创建本地快照，并确保定期创建云快照。 如果不采取这些措施，这些快照的本地空间可能很快耗尽，系统会自动将其删除，以确保继续成功处理主机写入。 |
| <*卷组名称*> 的本地快照已失效。 |<*卷组名称*> 的本地快照已失效并已删除，因为它们超出了设备上的本地空间。 |为了确保将来不会重复发生这种情况，请检查此备份策略的本地快照计划并删除不再需要的所有本地快照。 在与此备份策略组关联的卷中，频繁创建本地快照和数据频繁进出可能导致设备上的本地空间很快耗尽。 |
| 还原 <*源备份元素 ID*> 失败。 |还原作业失败。 |如果此备份策略中有本地固定卷，或者混合使用了本地固定卷与分层卷，请刷新备份列表，验证备份仍然有效。 如果备份有效，则可能是云连接问题导致还原操作无法成功完成。 已还原为此快照组的一部分的本地固定卷不需要将其所有数据下载到设备，如果此快照组中混合使用了分层卷和本地固定卷，则两者不会彼此同步。 要成功完成还原操作，需要在主机上将此组中的卷脱机，然后重试还原操作。 请注意，在还原过程中之前对卷数据进行的任何修改都将丢失。 |

### <a name="networking-alerts"></a>网络警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 无法启动 StorSimple 服务。 |数据路径错误 |如果问题仍然存在，请与 Microsoft 支持部门联系。 |
| 检测到“Data0”的 IP 地址重复。 | |系统检测到 IP 地址“10.0.0.1”冲突。 在设备上的网络资源 Data0  *\<device1 >* 处于脱机状态。 确保此网络中的其他任何实体未使用此 IP 地址。 若要排查网络问题，请转到[使用 Get-NetAdapter cmdlet 进行故障排除](storsimple-8000-troubleshoot-deployment.md#troubleshoot-with-the-get-netadapter-cmdlet)。 请联系网络管理员帮助解决此问题。 如果问题持续出现，请联系 Microsoft 支持。 |
| “Data0”的 IPv4（或 IPv6）地址已脱机。 | |设备 和前缀长度"22"在设备上的 *\<device1 >* 处于脱机状态。 确保此接口连接到的交换机端口运行正常。 若要排查网络问题，请转到[使用 Get-NetAdapter cmdlet 进行故障排除](storsimple-8000-troubleshoot-deployment.md#troubleshoot-with-the-get-netadapter-cmdlet)。 |
| 无法连接到身份验证服务。 |数据路径错误 |用于身份验证的 URL 不可访问。 请确保防火墙规则包括为 StorSimple 设备指定的 URL 模式。 有关在 Azure 门户中的 URL 模式的详细信息，请转到 https:\//aka.ms/ss-8000-network-reqs. 如果使用 Azure 政府版云，请转到在 https 中的 URL 模式：\//aka.ms/ss8000-gov-network-reqs.|

### <a name="performance-alerts"></a>性能警报

| 警报文本 | 事件 | 详细信息/建议的操作 | |
|:--- |:--- |:--- | --- |
| 设备负载已超过 <*阈值*>。 |响应时间比预期慢。 |设备会报告重度输入/输出负载下的利用率。 这可能导致设备不按预期工作。 检查已附加到设备的工作负荷，确定是否可将任何工作负荷转移到另一个设备，或者是否有不再需要的工作负荷。|
| 无法启动 StorSimple 服务。 |数据路径错误 |如果问题仍然存在，请与 Microsoft 支持部门联系。 |

### <a name="security-alerts"></a>安全警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| Microsoft 支持会话已开始。 |第三方访问了支持会话。 |请确认此访问是否已经过授权。 采取相应的措施后，请从警报页中清除此警报。 |
| <*元素*> 的密码会在 <*时间长度*> 后到期。 |密码即将过期。 |请在密码过期之前更改密码。 |
| <*元素 ID*> 缺少安全配置信息。 | |无法使用与此卷容器关联的卷来复制 StorSimple 配置。 为确保安全存储数据，我们建议删除该卷容器及其关联的所有卷。 采取相应的措施后，请从警报页中清除此警报。 |
| 尝试登录 <*元素 ID*> 已失败了 <*数字*> 次。 |多次登录尝试失败。 |设备可能遭受了攻击，或者已获授权的用户正在使用错误的密码尝试连接。<ul><li>请联系已获授权的用户，确认这些尝试是否来自合法的来源。 如果仍旧出现大量失败的登录尝试，请考虑禁用远程管理并与网络管理员联系。 采取相应的措施后，请从警报页中清除此警报。</li><li>检查是否使用正确的密码配置了 Snapshot Manager 实例。 采取相应的措施后，请从警报页中清除此警报。</li></ul>有关详细信息，请转到[更改过期的设备密码](storsimple-snapshot-manager-manage-devices.md#change-an-expired-device-password)。 |
| 更改服务数据加密密钥时发生一次或多次失败。 | |更改服务数据加密密钥时遇到错误。 解决错误条件后，在设备上使用适用于 StorSimple 的 Windows PowerShell 界面运行 `Invoke-HcsmServiceDataEncryptionKeyChange` cmdlet 来更新服务。 如果此问题持续出现，请联系 Microsoft 支持。 解决问题之后，请从警报页中清除此警报。 |

### <a name="support-package-alerts"></a>支持包警报

| 警报文本 | 事件 | 详细信息/建议的操作 |
|:--- |:--- |:--- |
| 创建支持包失败。 |StorSimple 无法生成包。 |重试此操作。 如果问题仍然存在，请与 Microsoft 支持部门联系。 解决问题之后，请从警报页中清除此警报。 |

## <a name="next-steps"></a>后续步骤

详细了解 [StorSimple 错误以及如何排查设备部署问题](storsimple-8000-troubleshoot-deployment.md)。


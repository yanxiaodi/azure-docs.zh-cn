---
title: StorSimple 虚拟阵列的最佳实践 | Microsoft 文档
description: 介绍有关部署和管理 StorSimple 虚拟阵列的最佳实践。
services: storsimple
documentationcenter: NA
author: alkohli
manager: timlt
editor: ''
ms.assetid: 57ac6eeb-c47c-442d-a5f4-b360d81a76a6
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/25/2019
ms.author: alkohli
ms.openlocfilehash: a8aed646f03b777722518152354cfe80cea043a0
ms.sourcegitcommit: e97a0b4ffcb529691942fc75e7de919bc02b06ff
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/15/2019
ms.locfileid: "71002805"
---
# <a name="storsimple-virtual-array-best-practices"></a>StorSimple 虚拟阵列最佳实践

## <a name="overview"></a>概述

[!INCLUDE [storsimple-virtual-array-eol-banner](../../includes/storsimple-virtual-array-eol-banner.md)]

Microsoft Azure StorSimple 虚拟阵列是一个集成式存储解决方案，可管理虚拟机监控程序中运行的本地虚拟设备与 Microsoft Azure 云存储之间的存储任务。 StorSimple 虚拟阵列是 8000 系列物理阵列的替代品，具有很高的效率和性价比。 该虚拟阵列可在现有虚拟机监控程序基础结构上运行，支持 iSCSI 和 SMB 协议，适合用于远程办公室/分支机构方案。 有关 StorSimple 解决方案的详细信息，请转到 [Microsoft Azure StorSimple 概述](https://www.microsoft.com/en-us/server-cloud/products/storsimple/overview.aspx)。

本文介绍在 StorSimple 虚拟阵列初始设置、部署和管理期间实施的最佳实践。 这些最佳实践提供经过验证的指导原则，让用户了解如何设置和管理虚拟阵列。 本文面向想要在数据中心内部署和管理虚拟阵列的 IT 管理员。

建议定期评审这些最佳实践，帮助确保在对设置或操作流程做出更改后，设备仍符合法规。 如果对虚拟阵列实施这些最佳实践时遇到任何问题，请[联系 Microsoft 支持部门](storsimple-virtual-array-log-support-ticket.md)获得帮助。

## <a name="configuration-best-practices"></a>配置最佳实践
这些最佳实践涵盖初始设置和部署虚拟阵列时遵循的指导原则。 其中包括与虚拟机预配、组策略设置、调整大小、设置网络、配置存储帐户以及创建虚拟阵列的共享和卷相关的最佳实践。 

### <a name="provisioning"></a>预配
StorSimple 虚拟阵列是在主机服务器虚拟机监控程序（Hyper-V 或 VMware）上预配的虚拟机 (VM)。 预配虚拟机时，请确保主机能够提供足够的资源。 有关详细信息，请转到预配阵列所要满足的[最低资源要求](storsimple-virtual-array-deploy2-provision-hyperv.md#step-1-ensure-that-the-host-system-meets-minimum-virtual-array-requirements)。

预配虚拟阵列时，请实施以下最佳实践：

|  | Hyper-V | VMware |
| --- | --- | --- |
| **虚拟机类型** |可以配合 Windows Server 2012 或更高版本和 *.vhdx* 映像使用的**第 2 代** VM。 <br></br> 可以配合 Windows Server 2008 或更高版本和 *.vhd* 映像使用的**第 1 代** VM。 |使用 *.vmdk* 映像时，请使用虚拟机版本 8。 |
| **内存类型** |配置为**静态内存**。 <br></br> 不要使用**动态内存**选项。 | |
| **数据磁盘类型** |预配为**动态扩展**。<br></br> 预配**固定大小**需要很长时间。 <br></br> 不要使用**差异**选项。 |使用**精简预配**选项。 |
| **数据磁盘修改** |不允许扩展或收缩。 尝试这样做造成设备上的本地数据丢失。 |不允许扩展或收缩。 尝试这样做造成设备上的本地数据丢失。 |

### <a name="sizing"></a>大小调整
调整 StorSimple 虚拟阵列的大小时，请考虑以下因素：

* 卷或共享的本地预留空间。 在本地层保留大约 12% 的空间给每个预配的分层卷或共享。 另外，大约保留 10% 的空间给本地固定卷用于保存文件系统。
* 快照开销。 在本地层保留大约 15% 的空间给快照。
* 还原需求。 如果以新操作的形式执行还原，则调整大小时应考虑还原所需的空间。 将还原为相同大小的共享或卷。
* 应分配一些缓冲区来应对意外增长。

根据上述因素，可以使用以下公式来表示调整大小要求：

`Total usable local disk size = (Total provisioned locally pinned volume/share size including space for file system) + (Max (local reservation for a volume/share) for all tiered volumes/share) + (Local reservation for all tiered volumes/shares)`

`Data disk size = Total usable local disk size + Snapshot overhead + buffer for unexpected growth or new share or volume`

以下示例说明如何根据要求调整虚拟阵列的大小。

#### <a name="example-1"></a>示例 1：
在虚拟阵列上，你希望能够：

* 预配 2 TB 的分层卷或共享。
* 预配 1 TB 的分层卷或共享。
* 预配 300 GB 的本地固定卷或共享。

针对上述卷或共享，我们计算一下本地层的空间要求。

首先，对于每个分层卷/共享，本地预留空间等于卷/共享大小的 12%。 对于本地固定卷/共享，本地预留空间等于卷/共享大小的 10%。 在本示例中，需要

* 240 GB 的本地预留空间（用于 2 TB 分层卷/共享）
* 120 GB 的本地预留空间（用于 1 TB 分层卷/共享）
* 330 GB 用于本地固定卷或共享（在 300 GB 预配大小的基础上增加 10% 的本地预留空间）

到目前为止，本地层所需的总空间是：240 GB + 120 GB + 330 GB = 690 GB。

其次，本地层所需的空间至少要与最大的单个预留空间一样大。 需要从云快照还原时，就要用到此额外空间量。 在此示例中，最大本地预订为 330 GB （包括文件系统的保留），因此你可以将其添加到 690 GB：690 GB + 330 GB = 1020 GB。
在执行其他后续还原操作时，始终可以释放以前还原操作的空间。

第三，需要本地总空间的 15% 来存储本地快照，因此只剩 85% 的空间可供使用。 在本示例中，这大约是 1020 GB，即 0.85 &ast; 预配的数据磁盘 TB 数。 因此，预配的数据磁盘是 (1020&ast;(1/0.85))= 1200 GB = 1.20 TB ~ 1.25 TB（四舍五入为最接近的四分位数）

将意外增长和新还原操作考虑进来后，应该预配大约 1.25 至 1.5 TB 的本地磁盘。

> [!NOTE]
> 我们也建议精简预配本地磁盘。 建议的依据是只在还原已超过 5 天的数据时，才需要还原空间。 对于项级恢复，不需要额外的还原空间就可以还原过去 5 天的数据。


#### <a name="example-2"></a>示例 2：
在虚拟阵列上，你希望能够：

* 预配 2 TB 分层卷
* 预配 300 GB 本地固定卷

由于 12% 的本地空间要预留给分层卷/共享，10% 要预留给本地固定卷/共享，因此需要

* 240 GB 本地预留空间（用于 2 TB 分层卷/共享）
* 330 GB 用于本地固定卷或共享（在 300 GB 预配空间的基础上增加 10% 的本地预留空间）

本地层所需的总空间是：240 GB + 330 GB = 570 GB

还原所需的最小本地空间是 330 GB。

15% 的总磁盘空间用于存储快照，因此可供使用的空间只有 85%。 因此，磁盘大小是 (900&ast;(1/0.85)) = 1.06 TB ~ 1.25 TB（四舍五入为最接近的四分位数）

将意外增长考虑进来后，可以预配 1.25 至 1.5 TB 本地磁盘。

### <a name="group-policy"></a>组策略
组策略是一种基础结构，可用于针对用户和计算机实施特定的配置。 组策略设置包含在组策略对象 (GPO) 中，后者链接到以下 Active Directory 域服务 (AD DS) 容器：站点、域或组织单位 (OU)。 

如果虚拟阵列已加入域，就能对它应用 GPO。 这些 GPO 可能会安装对 StorSimple 虚拟阵列的操作造成负面影响的应用程序，例如防病毒软件。

因此，我们建议：

* 确保虚拟阵列位于其自身的 Active Directory 组织单位 (OU) 中。
* 确保没有对虚拟阵列应用组策略对象 (GPO)。 可以阻止继承，确保虚拟阵列（子节点）不会自动继承父节点的任何 GPO。 有关详细信息，请转到[阻止继承](https://technet.microsoft.com/library/cc731076.aspx)。

### <a name="networking"></a>网络
虚拟阵列的网络配置是通过本地 Web UI 完成的。 虚拟网络接口是通过虚拟阵列预配所在的虚拟机监控程序启用的。 使用 [网络设置](storsimple-virtual-array-deploy3-fs-setup.md) 页可以配置虚拟网络接口的 IP 地址、子网和网关。  此外，可为设备配置主要和辅助 DNS 服务器、时间设置和可选的代理设置。 大多数网络配置都是一次性的设置。 在部署虚拟阵列之前，请查看 [StorSimple 网络要求](storsimple-ova-system-requirements.md#networking-requirements)。

部署虚拟阵列时，建议遵循以下最佳实践：

* 确保部署虚拟阵列的网络始终有能力提供 5 Mbps（或更高）的 Internet 带宽。
  
  * 根据工作负荷特征和数据更改率，所需的 Internet 带宽有所不同。
  * 可以处理的数据更改与 Internet 带宽成正比。 举例来说，在备份时，5 Mbps 的带宽可以在 8 小时内应对大约 18 GB 的数据更改。 带宽提高 4 倍时（20 Mbps），可以处理大 4 倍的数据更改（72 GB）。
* 确保随时都可以连接到 Internet。 设备的 Internet 连接如果断断续续或不可靠，可能导致无法访问云数据，并可能导致配置不受支持。
* 如果打算将设备部署为 iSCSI 服务器：
  
  * 建议禁用“自动获取 IP 地址”选项 (DHCP)。
  * 配置静态 IP 地址。 必须配置主要和辅助 DNS 服务器。
  * 如果在虚拟阵列上定义多个网络接口，只有第一个网络接口（默认情况下，此接口是**以太网**接口）可以连接到云。 要控制流量类型，可以在虚拟阵列上创建多个虚拟网络接口（配置为 iSCSI 服务器），并将这些接口连接到不同的子网。
* 若只要限制云带宽（由虚拟阵列使用），可以在路由器或防火墙中配置限制。 如果在虚拟机监控程序中定义限制，它会限制所有协议（包括 iSCSI 和 SMB），而不只是限制云带宽。
* 确保启用虚拟机监控程序的时间同步。 如果使用 Hyper-V，请在 Hyper-V 管理器选择虚拟阵列，转到“设置”&gt;“集成服务”，并确保已选中“时间同步”。

### <a name="storage-accounts"></a>存储帐户
StorSimple 虚拟阵列可与单个存储帐户关联。 此存储帐户可以是自动生成的存储帐户、位于服务所在的同一订阅中的帐户，也可以是与另一个订阅相关的存储帐户。 有关详细信息，请参阅有关如何[管理虚拟阵列的存储帐户](storsimple-virtual-array-manage-storage-accounts.md)的主题。

针对与虚拟阵列关联的存储帐户遵循以下建议。

* 将多个虚拟阵列与单个存储帐户链接时，请考虑虚拟阵列的最大容量 (64 TB) 和存储帐户的大小上限 (500 TB)， 以便将与该存储帐户关联的完整大小虚拟阵列数目限制为大约 7 个。
* 创建新存储帐户时
  
  * 建议在最靠近 StorSimple 虚拟阵列部署所在的远程办公室/分支机构的区域中创建，以便将延迟降到最低。
  * 请记住，无法跨不同的区域移动存储帐户， 也无法跨订阅移动服务。
  * 使用可在数据中心之间实现冗余的存储帐户。 异地冗余存储 (GRS)、区域冗余存储 (ZRS) 和本地冗余存储 (LRS) 都支持与虚拟阵列配合使用。 有关不同类型的存储帐户的详细信息，请转到 [Azure 存储复制](../storage/common/storage-redundancy.md)。

### <a name="shares-and-volumes"></a>共享和卷
如果 StorSimple 虚拟阵列配置为文件服务器，则可以预配共享；如果它配置为 iSCSI 服务器，则可以预配卷。 创建共享和卷的最佳实践与配置的大小和类型相关。

#### <a name="volumeshare-size"></a>卷/共享大小
如果虚拟阵列配置为文件服务器，则可以在其上预配共享；如果它配置为 iSCSI 服务器，则可以预配卷。 创建共享和卷的最佳实践与配置的大小和类型相关。 

在虚拟设备上预配共享或卷时，请记住以下最佳实践。

* 相对于已预配分层共享大小的文件大小可能影响分层性能。 处理大型文件可能会导致分层速度变慢。处理大型文件时，建议最大的文件应小于共享大小的 3%。
* 虚拟阵列上最多可以创建 16 个卷/共享。 有关在本地固定和分层的卷/共享的大小限制，请始终参阅 [StorSimple 虚拟阵列限制](storsimple-ova-limits.md)。
* 创建卷时，请将预期的数据使用量以及将来的增长量包含考虑。 稍后将无法扩展卷。
* 创建卷后，无法缩小 StorSimple 上的卷大小。
* 在写入 StorSimple 上的分层卷时，如果卷数据达到特定的阈值（相对于保留给卷的本地空间），IO 将受到限制。 继续写入此卷会让 IO 明显变慢。 尽管可以写入已超过预配容量的分层卷（系统不会主动阻止用户写入超出预配容量的数据），但会看到警报通知，指出已超过订阅量。 在看到该警报后，请务必采取补救措施，例如删除卷数据（目前不支持扩展卷）。
* 对于灾难恢复用例，可允许的共享/卷数为 16 个，可并行处理的共享/卷数上限也是 16 个，因此共享/卷数并不影响 RPO 和 RTO。

#### <a name="volumeshare-type"></a>卷/共享类型
根据用途，StorSimple 支持两种类型的卷/共享：本地固定和分层。 本地固定卷/共享是丰富预配的，分层卷/共享是精简预配的。 创建后，便无法将本地固定的卷/共享转换为分层卷/共享，反之亦然。

配置 StorSimple 卷/共享时，建议实施以下最佳实践：

* 在创建卷之前，先根据想要部署的工作负荷确定卷类型。 对于需要确保数据位于本地（即使在云服务中断期间）以及需要低云延迟的工作负荷，请使用本地固定卷。 在虚拟阵列上创建卷后，无法将卷类型从本地固定类型更改为分层，*反之亦然*。 例如，在部署 SQL 工作负荷或托管虚拟机 (VM) 的工作负荷时，请创建本地固定卷；对于文件共享工作负荷，则使用分层卷。


#### <a name="volume-format"></a>卷格式
在 iSCSI 服务器上创建 StorSimple 卷之后，必须初始化、装载和格式化卷。 此操作在连接到 StorSimple 设备的主机上执行。 在 StorSimple 主机上装载和格式化卷时，建议遵循以下最佳实践。

* 对所有 StorSimple 卷执行快速格式化。
* 在格式化 StorSimple 卷时，使用 64 KB 分配单元大小 (AUS)（默认值为 4 KB）。 使用 64 KB AUS 的依据是在内部针对一般 StorSimple 工作负荷及其他工作负荷进行的测试。
* 使用配置为 iSCSI 服务器的 StorSimple 虚拟阵列时，请不要使用跨区卷或动态磁盘，因为这些卷或磁盘不受 StorSimple 的支持。

#### <a name="share-access"></a>共享访问
在虚拟阵列文件服务器上创建共享时，请遵循以下指导原则：

* 创建共享时，请分配用户组（而不是单个用户）作为共享管理员。
* 创建共享后，可以通过 Windows 资源管理器编辑共享，以管理 NTFS 权限。

#### <a name="volume-access"></a>卷访问
在 StorSimple 虚拟阵列上配置 iSCSI 卷时，请务必在必要之处控制访问。 要确定哪些主机服务器可以访问卷，请创建访问控制记录 (ACR) 并将其与 StorSimple 卷相关联。

为 StorSimple 卷配置 ACR 时，请遵循以下最佳实践：

* 始终将至少一个 ACR 关联到卷。

* 将多个 ACR 分配到卷时，请确保卷在公开时，不允许多个非群集主机并发访问。 如果已将多个 ACR 分配到卷，将弹出一条警告消息用于检查配置。

### <a name="data-security-and-encryption"></a>数据安全与加密
StorSimple 虚拟阵列具有数据安全和加密功能，可确保数据的机密性和完整性。 使用这些功能时，建议遵循以下最佳实践： 

* 先定义用于生成 AES-256 加密的云存储加密密钥，然后将数据从虚拟阵列发送到云。 如果数据一开始就已加密，则不需要此密钥。 使用密钥管理系统（例如 [Azure 密钥保管库](../key-vault/key-vault-overview.md)）可以生成并妥善保存密钥。
* 在通过 StorSimple Manager 服务配置存储帐户时，请务必启用 SSL 模式来创建用于在 StorSimple 设备与云之间实现网络通信的安全隧道。
* 定期重新生成存储帐户的密钥（通过访问 Azure 存储服务），反映管理员列表更改造成的访问权限更改。
* 虚拟阵列上的数据先压缩并进行重复数据删除，再发送到 Azure。 不建议在 Windows Server 主机上使用“重复数据删除”角色服务。

## <a name="operational-best-practices"></a>操作最佳实践
操作最佳实践是指在虚拟阵列的日常管理或操作期间应遵循的指导原则。 这些最佳实践涵盖特定的管理任务，例如备份、从备份集还原、执行故障转移、禁用和删除阵列、监视系统使用情况和运行状况，以及在虚拟阵列上运行病毒扫描。

### <a name="backups"></a>备用
虚拟阵列上的数据通过两种方式备份到云：默认在每天 22:30 自动启动的全设备备份，或者手动按需备份。 默认情况下，设备会自动创建其上所有数据的每日云快照。 有关详细信息，请转到 [back up your StorSimple Virtual Array](storsimple-virtual-array-backup.md)（备份 StorSimple 虚拟阵列）。

与默认备份关联的频率和保留期无法更改，但可以配置每天启动每日备份的时间。 在配置自动备份的开始时间时，我们建议：

* 将备份安排在非高峰时间。 备份开始时间不应与大量主机 IO 一致。
* 在打算执行设备故障转移时或维护前，先启动手动按需备份保护虚拟阵列上的数据。

### <a name="restore"></a>还原
从备份集还原的方法有两种：还原到另一个卷或共享，或执行项级恢复（仅适用于配置为文件服务器的虚拟阵列）。 使用项级恢复可从 StorSimple 设备上的所有共享的云备份对文件和文件夹进行粒度恢复。 有关详细信息，请转到[从备份还原](storsimple-virtual-array-clone.md)。

执行还原时，请记住以下指导原则：

* StorSimple 虚拟阵列不支持就地还原。 但是，可以通过两个步骤轻松实现此目的：在虚拟阵列上腾出空间，并还原到另一个卷/共享。
* 从本地卷还原时，请记住，还原是长时间运行的操作。 尽管卷很快就能联机，但数据仍在后台处于冻结状态。
* 还原过程中，卷类型保持不变。 一个分层卷将还原到另一个分层卷，一个本地固定卷将还原到另一个本地固定卷。
* 尝试从备份集中还原卷或共享时，如果还原作业失败，在门户中可能仍然会创建目标卷或共享。 请务必在门户中删除这个未使用的目标卷或共享，以便最大程度地减少此元素引发的任何问题。

### <a name="failover-and-disaster-recovery"></a>故障转移和灾难恢复
使用设备故障转移可将数据中心内的*源*设备数据迁移到位于相同或不同地理位置的另一个*目标*设备。 设备故障转移适用于整个设备。 在故障转移期间，源设备的云数据将所有权更改为目标设备云数据。

对于 StorSimple 虚拟阵列，只能故障转移到同一 StorSimple Manager 服务管理的另一个虚拟阵列。 不允许故障转移到 8000 系列设备或不同 StorSimple Manager 服务（非源设备的服务）管理的阵列。 有关故障转移注意事项的详细信息，请转到 [prerequisites for the device failover](storsimple-virtual-array-failover-dr.md)（设备故障转移的先决条件）。

对虚拟阵列执行故障转移时，请记住以下事项：

* 针对计划内故障转移，建议的最佳实践是先将所有卷/共享脱机，再启动故障转移。 遵循操作系统特定的说明，先将主机上的卷/共享脱机，再将虚拟设备上的卷/共享脱机。
* 为实现文件服务器灾难恢复 (DR)，建议将目标设备加入与源域相同的域，以自动解析共享权限。 只有此版本才支持故障转移到相同域中的目标设备。
* 成功完成 DR 后，会自动删除源设备。 尽管该设备不再可用，但主机系统上预配的虚拟机仍会消耗资源。 建议在主机系统中删除此虚拟机，防止产生任何费用。
* 请注意，即使故障转移不成功，**云中的数据始终保持安全**。 设想以下三种故障转移不成功的方案：
  
  * 故障转移的初始阶段失败，例如在执行 DR 预先检查时。 在此情况下，目标设备仍可用。 可以在同一目标设备上重试故障转移。
  * 实际故障转移期间发生失败。 在此情况下，目标设备标记为不可用。 必须预配并配置另一个目标虚拟阵列用于故障转移。
  * 故障转移已完成，随后删除了源设备，但目标设备有问题，无法访问任何数据。 云中的数据仍保持安全，只要创建另一个虚拟阵列，然后将它用作 DR 的目标设备，即可轻松检索数据。

### <a name="deactivate"></a>停用
停用 StorSimple 虚拟阵列时，会断开设备与相应 StorSimple Manager 服务之间的连接。 停用是不可撤消的**永久性**操作。 停用的设备不再能够注册到 StorSimple Manager 服务。 有关详细信息，请转到 [deactivate and delete your StorSimple Virtual Array](storsimple-virtual-array-deactivate-and-delete-device.md)（停用和删除 StorSimple 虚拟阵列）。

停用虚拟阵列时，请记住以下最佳实践：

* 先创建所有数据的云快照，再停用虚拟设备。 停用虚拟阵列时，所有本地设备数据都会丢失。 创建云快照可在后续阶段恢复数据。
* 停用 StorSimple 虚拟阵列之前，请务必停止或删除依赖于该设备的客户端与主机。
* 删除不再使用的已停用设备，以免产生费用。

### <a name="monitoring"></a>监视
为确保 StorSimple 虚拟阵列持续处于正常状态，需要监视该阵列，确保能够收到系统传来的信息，包括警报。 若要监视虚拟阵列的整体运行状况，请实施以下最佳实践：

* 配置监视功能来跟踪虚拟阵列的数据磁盘以及 OS 磁盘的使用情况。 如果运行 Hyper-V，可以结合使用 System Center Virtual Machine Manager (SCVMM) 和 System Center Operations Manager 来监视虚拟化主机。
* 在虚拟阵列上配置电子邮件通知，以便在达到特定的使用级别时发送警报。                                                                                                                                                                                                

### <a name="index-search-and-virus-scan-applications"></a>索引搜索和病毒扫描应用程序
StorSimple 虚拟阵列可以自动将数据从本地层分层到 Microsoft Azure 云。 需要注意，在使用索引搜索或病毒扫描等应用程序扫描 StorSimple 上存储的数据时，本地层并不会访问和提取云数据。

在虚拟阵列上配置索引搜索或病毒扫描时，建议实施以下最佳实践：

* 禁用任何自动配置的完全扫描操作。
* 对于分层卷，请将索引搜索或病毒扫描应用程序配置为执行增量扫描。 这只扫描可能位于本地层上的新数据。 增量操作期间不会访问已分层到云中的数据。
* 确保配置正确的搜索筛选器和设置，以便只扫描目标类型的文件。 例如，在增量或完全索引重建期间，不应扫描图像文件（JPEG、GIF 和 TIFF）和工程绘图。

如果使用 Windows 索引进程，请遵循以下指导原则：

* 不要将 Windows 索引器用于分层卷，因为如果索引经常需要重建，将从云中重复调用大量数据（TB 量级）。 重建索引需要检索所有文件类型才能为其内容编制索引。
* 对本地固定卷使用 Windows 索引器，因为这只需访问本地层上的数据来创建索引（不访问云数据）。

### <a name="byte-range-locking"></a>字节范围锁定
应用程序可以锁定文件内指定范围的字节。 如果写入 StorSimple 的应用程序启用字节范围锁定，则分层无法在虚拟阵列上正常工作。 要使分层正常工作，应解除锁定所访问文件的所有区域。 虚拟阵列上的分层卷不支持字节范围锁定。

缓解字节范围锁定的建议措施包括：

* 在应用程序逻辑中关闭字节范围锁定。
* 针对与此应用程序关联的数据使用本地固定卷（而不是分层卷）。 本地固定卷不会分层到云中。
* 在启用字节范围锁定的情况下使用本地固定卷时，在还原完成之前，卷可以处于联机状态。 在这种情况下，必须等到还原完成。

## <a name="multiple-arrays"></a>多个阵列
可能需要部署多个虚拟阵列，以应对由于数据的工作集不断增长而溢出到云中，从而影响设备性能的情况。 在这种情况下，最好是随着工作集的增长缩放设备。 这需要在本地数据中心内添加一个或多个设备。 添加设备时，可以：

* 拆分当前的数据集。
* 将新工作负荷部署到新设备。
* 从负载均衡的立场看，在部署多个虚拟阵列时，建议将这些阵列分布到不同的虚拟机监控程序主机。
* 可以在一个分布式文件系统命名空间中部署多个虚拟阵列（如果配置为文件服务器或 iSCSI 服务器）。 有关详细步骤，请转到 [Distributed File System Namespace Solution with Hybrid Cloud Storage Deployment Guide](https://www.microsoft.com/download/details.aspx?id=45507)（使用混合云存储的分布式文件系统命名空间解决方案部署指南）。 目前不建议将分布式文件系统复制用于虚拟阵列。 

## <a name="see-also"></a>请参阅
了解如何通过 StorSimple Manager 服务[管理 StorSimple 虚拟阵列](storsimple-virtual-array-manager-service-administration.md)。


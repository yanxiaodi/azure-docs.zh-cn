---
title: 参考 - Azure Active Directory B2C 中的信任框架 | Microsoft Docs
description: 本主题介绍了 Azure Active Directory B2C 自定义策略和标识体验框架。
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 08/04/2017
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: e96ddcb904bbda6c3123ffc9d3da50ff80823689
ms.sourcegitcommit: a0b37e18b8823025e64427c26fae9fb7a3fe355a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/25/2019
ms.locfileid: "68500011"
---
# <a name="define-trust-frameworks-with-azure-ad-b2c-identity-experience-framework"></a>使用 Azure AD B2C 标识体验框架定义信任框架

利用标识体验框架的 Azure Active Directory B2C (Azure AD B2C) 自定义策略可以为组织提供集中式服务。 此服务降低了大型社区利益体中联合身份验证的复杂性。 复杂性会降低到单一信任关系和单个元数据交换。

Azure AD B2C 自定义策略使用标识体验框架使你能够回答以下问题:

- 必须遵守哪些法律、安全、隐私和数据保护策略？
- 谁是联系人，成为认可参与者的过程是什么？
- 谁是认可的标识信息提供者（也称为“声明提供方”），他们发挥哪些作用？
- 谁是认可的信赖方（还可以询问他们需要什么）？
- 参与者的“在线”技术互操作性要求是什么？
- 必须强制实施哪些“运行时”操作规则来交换数字标识信息？

为了解答这些问题，使用标识体验框架的 Azure AD B2C 自定义策略利用了信任框架 (TF) 构造。 我们来分析此构造及其作用。

## <a name="understand-the-trust-framework-and-federation-management-foundation"></a>了解信任框架和联合管理的基础

此信任框架是相关社区中的参与者必须遵守的标识、安全、隐私和数据保护策略的书面规范。

联合标识为实现 Internet 规模的最终用户标识保证提供了基础。 通过将标识管理委派给第三方，可对多个信赖方重复使用某个最终用户的单一数字标识。  

标识保证要求标识提供者 (Idp) 和属性提供者 (AtP) 遵守特定的安全、隐私和操作策略与做法。  如果无法执行直接检查，信赖方 (RP) 必须与它们合作的 Idp 和 AtP 发展信任关系。  

随着数字标识信息的使用者和提供者数目的增长，继续以成对的方式管理这些信任关系，甚至以成对的方式交换网络连接所需的技术元数据，将变得困难。  联合中心在解决这些问题上只是获得了有限的成功。

### <a name="what-a-trust-framework-specification-defines"></a>信任框架规范定义
TF 是开放标识交换 (OIX) 信任框架模型的关键，在这种模型中，每个相关社区都受到特定 TF 规范的监管。 此类 TF 规范定义：

- **相关社区的安全和隐私指标，其定义包括：**
    - 参与者提供/所需的保证级别 (LOA)；例如，数字标识信息真实性的一组有序置信度评级。
    - 参与者提供/所需的保护级别 (LOP)；例如，相关社区中参与者处理的数字标识信息受保护程度的一组有序置信度评级。

- **参与者提供/所需的数字标识信息的说明**。

- **有关生成和使用数字标识信息的技术策略，因而这些策略也与度量 LOA 和 LOP 有关。这些书面策略通常包括以下策略类别：**
    - 身份证明策略，例如：*个人身份信息的审查强度如何？*
    - 安全策略，例如：*信息完整性和保密性的保护强度如何？*
    - 隐私策略，例如：*用户对个人身份信息 (PII) 拥有哪些控制权？*
    - 留存性策略，例如：*当提供者停止操作时 PII 的持续性和保护如何？*

- **有关生成和使用数字标识信息的技术配置文件。这些配置文件包括：**
    - 为根据指定 LOA 提供数字标识信息界定了接口范围。
    - 在线互操作性的技术要求。

- **描述社区中的参与者可以履行的各种角色，以及履行这些角色所需的资格。**

因此，TF 规范控制了在相关社区的以下参与者之间交换标识信息的方式：信赖方、标识提供者、属性提供者和属性验证程序。

TF 规范是用于相关社区治理的一个或多个参考文档，让相关社区调控社区中数字标识信息的断言和使用。 它是一组书面的策略和过程，目的是在相关社区的成员之间的、用于联机事务的数字标识中建立信任。  

也就是说，TF 规范定义有关为某个社区创建可行联合标识生态系统的规则。

目前已针对此类做法带来的优势达成了广泛的共识。 毫无疑问，信任框架规范有助于营造具有可验证安全性、保证和隐私特征的数字标识生态系统，这意味着可跨多个相关社区重复使用。

出于此原因，使用标识体验框架的 Azure AD B2C 自定义策略利用此规范作为呈现其数据的基础，以便 TF 简化互操作性。  

利用标识体验框架的 Azure AD B2C 自定义策略以人工和计算机可读数据的组合形式来表示 TF 规范。 此模型的某些部分（通常是更侧重于治理的部分）作为已发布的安全性和隐私策略文档以及相关过程（如果有的话）的参考进行介绍。 其他部分详细介绍了配置元数据和运行时规则，这些规则有助于操作自动化。

## <a name="understand-trust-framework-policies"></a>了解信任框架策略

在实现方面，TF 规范包含一组允许完全控制标识行为和体验的策略。  利用标识体验框架的 Azure AD B2C 自定义策略可以让你通过此类可定义和配置的声明性策略编写和创建自己的 TF：

- 定义 TF 相关社区的联合标识生态系统的文档参考。 这些参考是 TF 文档的链接。 （预定义的）“运行时”操作规则，或者用于自动化和/或控制声明交换与使用的用户旅程。 这些用户旅程与 LOA（和 LOP）关联。 因此，策略可以包含具有不同 LOA（和 LOP）的用户旅程。

- 相关社区中的标识提供者和属性提供者或声明提供程序、它们支持的技术配置文件，以及相关的（带外）LOA/LOP 认证。

- 与属性验证程序或声明提供程序的集成。

- 社区中的信赖方（根据推断）。

- 用于在参与者之间建立网络通信的元数据。 在信赖方与其他社区参与者之间执行“在线”互操作性协调的事务过程中，将配合技术配置文件使用此元数据。

- 任何协议转换（例如，SAML 2.0、OAuth2、WS-Federation 和 OpenID Connect）。

- 身份验证要求。

- 多重协调（如果有）。

- 所有可用声明的共享架构，以及与相关社区的参与者的映射。

- 用于维持声明交换和使用的所有声明转换以及此上下文中的可能数据最小化。

- 绑定和加密。

- 声明存储。

### <a name="understand-claims"></a>了解声明

> [!NOTE]
> 我们将所有可能类型的、可交换的标识信息统称为“声明”：有关最终用户身份验证凭据、标识审查、通信设备、物理位置、个人身份属性等的声明。  
>
> 我们使用术语“声明”而不是“属性”，这是因为在联机事务中，无法直接由信赖方验证这些数据项目。 而是有关事实的断言或声明，信赖方必须为其建立充分的置信度以授予最终用户所请求的事务。  
>
> 使用术语“声明”的另一个原因在于，使用标识体验框架的 Azure AD B2C 自定义策略旨在以一致的方式简化所有类型的数字标识信息的交换，而不考虑是否为用户身份验证或属性检索定义了基本协议。  同样，如果我们不想要区分标识提供者、属性提供者和属性验证程序的具体功能，我们会使用术语“声明提供程序”来统称这些参与者。   

因此，声明提供程序控制了信赖方、标识提供者、属性提供者和属性验证程序之间的标识信息交换方式。 它们控制了需要使用哪些标识提供者和属性提供者来完成信赖方的身份验证。 应该将它们视为域特定的语言 (DSL)，即，包含继承、if 语句和多形性的特定应用程序域专用的计算机语言。

这些策略构成利用标识体验框架的 Azure AD B2C 自定义策略中 TF 构造的计算机可读部分。 它们包括所有操作详细信息，具体涵盖声明提供程序的元数据和技术配置文件、声明架构定义、声明转换函数以及填充的用户旅程，以便推动操作业务流程和自动化。  

它们被假定为动态文档，因其内容很有可能随着时间的推移而发生变化，其中涉及策略中声明的活动参与者。 此外，成为参与者的条款和条件也有可能会发生更改。  

当不同的声明提供程序/验证程序加入或离开策略集（社区代表方）时，将信赖方与不断进行的信任和连接重新配置相区分可以大大简化联合的设置和维护。

互操作性是另一个重大难题。 必须集成其他的声明提供程序/验证程序，因为信赖方不太可能支持全部所需的协议。 Azure AD B2C 自定义策略支持行业标准协议，并可在信赖方和属性提供者不支持相同的协议时应用特定的用户旅程来转置请求，因此解决了此问题。  

用户旅程包含用于在信赖方与其他参与者之间协调“在线”互操作性的协议配置文件和元数据。 还会向标识信息交换请求/响应消息应用操作运行时规则，强制与 TF 规范中发布的策略相符。 用户旅程的概念是自定义客户体验的关键所在。 它还阐明了系统在协议级别的工作方式。

在此基础上，信赖方应用程序和门户可以根据其上下文，通过传递特定策略的名称来调用利用标识体验框架的 Azure AD B2C 自定义策略，并准确获取所需的行为和信息交换，而不会出现任何混乱或风险。

---
title: 使用 Azure CDN 高级 HTTP 报告分析使用情况统计信息 | Microsoft Docs
description: 了解如何在 Microsoft Azure CDN 中创建高级 HTTP 报告。 这些报告提供有关 CDN 活动的详细信息。
services: cdn
documentationcenter: ''
author: zhangmanling
manager: erikre
editor: ''
ms.assetid: ef90adc1-580e-4955-8ff1-bde3f3cafc5d
ms.service: azure-cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: 0b0eec2425f8a1663eb7a09c83a6bad037d1d79c
ms.sourcegitcommit: ccb9a7b7da48473362266f20950af190ae88c09b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/05/2019
ms.locfileid: "67594112"
---
# <a name="analyze-usage-statistics-with-azure-cdn-advanced-http-reports"></a>使用 Azure CDN 高级 HTTP 报告分析使用情况统计信息
## <a name="overview"></a>概述
本文档介绍 Microsoft Azure CDN 中的高级 HTTP 报告。 这些报告提供有关 CDN 活动的详细信息。

[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="accessing-advanced-http-reports"></a>访问高级 HTTP 报告
1. 从 CDN 配置文件的边栏选项卡，单击“**管理**”按钮。
   
    ![CDN 配置文件边栏选项卡管理按钮](./media/cdn-advanced-http-reports/cdn-manage-btn.png)
   
    CDN 管理门户打开。
2. 将鼠标悬停在“**分析**”选项卡，然后悬停在“**高级 HTTP 报告**”浮出控件。  单击“**HTTP 大型平台**”。
   
    ![CDN 管理门户 - 高级报告菜单](./media/cdn-advanced-http-reports/cdn-advanced-reports.png)
   
    报告选项会显示。

## <a name="geography-reports-map-based"></a>地理报告（基于地图）
有五种报告利用地图来指示请求内容的区域。 这些报告是世界地图、美国地图、加拿大地图、欧洲地图和亚太地图。

每个基于地图的报表进行排名地理实体 （即国家/地区，映射旨在帮助您直观地显示为其请求内容的位置。 它能够根据在该区域中经历的需求量，通过对每个区域进行颜色编码来这样做。 较浅的阴影区域表示内容的需求较低，而较暗的区域表示内容有较高的需求量。

直接在地图下方提供每个地区的详细的流量和带宽信息。 这样，可以查看命中总数、命中百分比、传输的总数据量（以千兆字节为单位）以及每个区域传输的数据的百分比。 查看每个指标的说明。 最后，当将鼠标悬停 （即国家/地区、 状态或省） 的区域的名称和该区域中发生的命中百分比将显示为工具提示。

下面为每种类型的基于地图的地理报告提供简要说明。

| 报告名称 | 描述 |
| --- | --- |
| 世界地图 |此报告允许查看全球对 CDN 内容的需求。 每个国家/地区使用了彩色编码以表示源自该区域的命中数的百分比世界地图上。 |
| 美国地图 |此报告允许查看美国对 CDN 内容的需求。 每个州都在此地图上进行了颜色编码，以表示源自该区域的命中数的百分比。 |
| 加拿大地图 |此报告允许查看加拿大对 CDN 内容的需求。 每个省都在此地图上进行了颜色编码，以表示源自该区域的命中数的百分比。 |
| 欧洲地图 |此报告允许查看欧洲对 CDN 内容的需求。 每个国家/地区是经过彩色编码以表示源自该区域的命中数的百分比此地图上。 |
| 亚太地图 |此报告允许查看亚洲对 CDN 内容的需求。 每个国家/地区是经过彩色编码以表示源自该区域的命中数的百分比此地图上。 |

## <a name="geography-reports-bar-charts"></a>地理报告（条形图）
还有两个额外的根据地理位置提供统计信息的报告，这两个报告分别是热门城市和热门国家/地区报告。 这些报表对排名的城市和国家/地区，分别根据源自这些国家/地区的命中次数。 在生成此类型的报告后，条形图将表示前 10 个城市或国家/地区特定平台上请求内容。 此条形图可让你快速评估生成最多内容请求数的区域。

该图表的左侧（y 轴）表示在指定区域中发生了多少次命中。 在图表（x 轴）的正下方，将找到前 10 个区域的标签。

### <a name="using-the-bar-charts"></a>使用条形图
* 如果将鼠标悬停在某个条形上，则该区域中发生的命中的名称和总数会显示为工具提示。
* 热门城市报告的工具提示标识由其名称、 州/省和国家/地区缩写的城市。
* 如果无法确定发起请求的城市或区域（即州/省），则它将指明它们是未知的。 如果国家/地区是未知的则两个问号 （即，??），将显示。
* 报告可能包含“欧洲”或“亚洲/太平洋地区”的指标。 这些项目并不意味着提供这些区域的所有 IP 地址的统计信息。 相反，它们只适用于源自分布在欧洲或亚洲/太平洋而不是对特定城市或国家/地区的 IP 地址的请求。

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到命中总数、命中百分比、传输的数据量（以千兆字节为单位）以及前 250 个区域传输的数据的百分比。 查看每个指标的说明。

下方提供了两种类型的报告的简要说明。

| 报告名称 | 描述 |
| --- | --- |
| 热门城市 |此报告根据源自该区域的命中数对城市进行排名。 |
| 热门国家/地区 |此报告根据源自该国家/地区的命中数根据国家/地区进行排名。 |

## <a name="daily-summary"></a>每日摘要
每日摘要报告可让你查看每天在特定平台上传输的命中和数据的总数。 此信息可用于快速识别 CDN 活动模式。 例如，此报告可以帮助检测哪些天的流量高于或低于预期。

在生成此类型的报告后，条形图将提供关于在报告所涵盖的时间段内每天经历的平台特定需求量的直观指示。 它将通过在报告中显示每一天的条形来实现此操作。 例如，选择称为“上周”的时间段将生成具有七个条形的条形图。 每个条形都会显示当天的命中次数。

该图表的左侧（y 轴）表示在指定日期内发生了多少次命中。 将图表 （x 轴），正下方看到一个标签，表示日期 (格式：YYYY-MM-DD) 的报表中包含每一天。

> [!TIP]
> 如果将鼠标悬停在某个条形上，则该日期发生的命中的总数会显示为工具提示。
> 
> 

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到报告涵盖的每一天的命中总数和传输的数据量（以千兆字节为单位）。

## <a name="by-hour"></a>按小时
“按小时”报告可让你查看每小时在特定平台上传输的命中和数据的总数。 此信息可用于快速识别 CDN 活动模式。 例如，此报告可以帮助检测当天的哪些时段的流量高于或低于预期。

在生成此类型的报告后，条形图将提供关于在报告所涵盖的时间段内每小时经历的平台特定需求量的直观指示。 它将通过显示报告中涵盖的每个小时的条形来实现此操作。 例如，选择 24 小时时间段将生成具有二十四个条形的条形图。 每个条形都会显示在该小时内发生的命中的总数。

该图表的左侧（y 轴）表示在指定小时内发生了多少次命中。 将图表 （x 轴），正下方看到一个标签，指示日期/时间 (格式：YYYY-MM-DD hh: mm) 包含在报表中的每小时。 时间使用 24 小时格式报告，并使用 UTC/GMT 时区进行指定。

> [!TIP]
> 如果将鼠标悬停在某个条形上，则该小时发生的命中的总数会显示为工具提示。
> 
> 

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到报告涵盖的每小时的命中总数和传输的数据量（以千兆字节为单位）。

## <a name="by-file"></a>按文件
“按文件”报告允许查看最常请求的资产在特定平台上产生的需求量和流量。 生成此类型的报告后，会根据指定时间段内的前 10 个最常请求的资产生成条形图。

> [!NOTE]
> 出于本报告的目的，边缘 CNAME URL 将转换为等效的 CDN URL。 这样便可以对与资产相关联的命中的总数进行精确计数，而不管用于请求它的是 CDN 或边缘 CNAME URL。
> 
> 

图表的左侧（y 轴）表示在指定时间段内每个资产的请求数。 在图表（x 轴）的正下方，会看到一个标签，指出前 10 个最常请求的资产的文件名。

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到前 250 个最常请求的资产的以下信息：相对路径、命中总数、命中百分比、传输的数据量（以千兆字节为单位）以及传输的数据的百分比。

## <a name="by-file-detail"></a>按文件详细信息
“按文件详细信息”报告允许查看特定资产在特定平台上产生的需求量和流量。 “文件详细信息适用于”选项位于此报告的最顶部。 此选项提供了所选平台上最常请求的资产的列表。 为了生成“按文件详细信息”报告，需要从“文件详细信息适用于”选项中选择所需的资产。 此后，条形图将指示其在指定时间段内生成的每日需求量。

图表的左侧（y 轴）表示资产在特定日期经历的请求的总数。 将图表 （x 轴），正下方看到一个标签，表示日期 (格式：YYYY-MM-DD) cdn 报告对资产的需求。

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到报告涵盖的每一天的命中总数和传输的数据量（以千兆字节为单位）。

## <a name="by-file-type"></a>按文件类型
“按文件类型”报告允许查看由文件类型产生的需求量和流量。 生成此类型的报告后，环形图将表示前 10 个文件类型生成的命中的百分比。

> [!TIP]
> 如果将鼠标悬停在环形图中的一个扇面上，该文件类型的 Internet 介质类型会显示为工具提示。
> 
> 

可以在环形图下方查看用于生成环形图的数据。 可以在其中找到文件扩展名/Internet 介质类型、命中总数、命中百分比、传输的数据量（以千兆字节为单位）以及前 250 个文件类型传输的数据的百分比。

## <a name="by-directory"></a>按目录
“按目录”报告允许查看特定目录的内容在特定平台上产生的需求量和流量。 生成此类型的报告后，条形图将表示前 10 个目录中的内容生成的命中的总数。

### <a name="using-the-bar-chart"></a>使用条形图
* 将鼠标悬停在某个条形上可查看相应目录的相对路径。
* 当按目录计算需求时，不会计入存储在目录的子文件夹中的内容。 该计算仅依赖于为存储在实际目录中的内容生成的请求的数量。
* 出于本报告的目的，边缘 CNAME URL 将转换为等效的 CDN URL。 这样便可以对与资产相关联的所有统计信息进行精确计数，而不管用于请求它的是 CDN 或边缘 CNAME URL。

图表的左侧（y 轴）表示对存储在前 10 个目录中的内容发出的请求的总数。 图表上的每个条形表示一个目录。 使用颜色编码方案将条形与“前 250 个完整目录”部分中列出的目录进行匹配。

可以在条形图下方查看用于生成条形图的数据。 可以在其中找到前 250 个目录的以下信息：相对路径、命中总数、命中百分比、传输的数据量（以千兆字节为单位）以及传输的数据的百分比。

## <a name="by-browser"></a>按浏览器
“按浏览器”报告可让你查看用于请求内容的浏览器。 生成此类型的报告后，饼图将表示前 10 个浏览器处理的请求的百分比。

### <a name="using-the-pie-chart"></a>使用饼图
* 将鼠标悬停在饼图的扇面上可查看浏览器的名称和版本。
* 出于本报告的目的，每个唯一的浏览器/版本组合被视为不同的浏览器。
* 名为“其他”的扇面表示所有其他浏览器和版本处理的请求的百分比。

可以在饼图下方查看用于生成饼图的数据。 在这里，可以找到前 250 个浏览器的浏览器类型/版本号、命中总数和命中百分比。

## <a name="by-referrer"></a>按引用网站
“按引用网站”报告允许查看引用所选平台上内容的热门引用网站。 引用程序指示生成请求的主机名。 生成此类型的报告后，条形图将表示前 10 个引用网站生成的需求量（即命中数）。

图表的左侧（y 轴）表示资产为每个引用网站所经历的请求的总数。 图表上的每个条形表示一个引用网站。 使用颜色编码方案将条形与“前 250 个引用网站”部分中列出的引用网站进行匹配。

可以在条形图下方查看用于生成条形图的数据。 在这里，可以找到从前 250 名引用网站中生成的 URL、命中总数以及命中百分比。

## <a name="by-download"></a>按下载
“按下载”报告允许分析最常请求的内容的下载模式。 报告的顶部包含一个条形图，用于将前 10 个最常请求的资产的尝试下载与完成下载进行比较。 每个条形都根据其是尝试下载（蓝色）还是完成下载（绿色）进行颜色编码。

> [!NOTE]
> 出于本报告的目的，边缘 CNAME URL 将转换为等效的 CDN URL。 这样便可以对与资产相关联的所有统计信息进行精确计数，而不管用于请求它的是 CDN 或边缘 CNAME URL。
> 
> 

图表的左侧（y 轴）表示前 10 个最常请求的资产的文件名。 在图表（x 轴）的正下方，会看到表示尝试/完成下载的总数的标签。

在条形图的正下方，将列出前 250 个最常请求的资产的以下信息：相对路径（包括文件名）、下载到完成的次数、请求的次数，以及导致完整下载的请求的百分比。

> [!TIP]
> 当资产已完全下载时，HTTP 客户端（即浏览器）不会通知我们的 CDN。 因此，我们必须根据状态代码和字节范围请求来计算资产是否已完全下载。 在进行此计算时，我们要查找的第一件事是请求是否导致 200 OK 状态代码。 如果会导致 200 OK 状态代码，那么我们查看字节范围请求，以确保它们覆盖整个资产。 最后，我们将传输的数据量与已请求资产的大小进行比较。 如果传输的数据等于或大于文件大小，并且字节范围请求适合该资产，则将该命中视为完全下载。
> 
> 由于本报告的解释性质，应该记住以下几点，它们可能会改变本报告的一致性和准确性。
> 
> * 当用户代理的行为不同时，无法准确预测流量模式。 这可能产生大于 100％ 的完整下载结果。
> * 本报告可能无法准确表示利用“HTTP 渐进式下载”的资产。 这是由于用户在视频中查找不同的位置。
> 
> 

## <a name="by-404-errors"></a>按 404 错误
“按 404 错误”报告可让你识别生成最多“404 未找到”状态代码的内容类型。 报告的顶部包含返回最多 404 Not Found 状态代码的前 10 个资产的条形图。 此条形图将请求总数与导致这些资产的 404 Not Found 状态代码的请求进行比较。 每个条形都进行了颜色编码。 黄色条用于表示该请求导致了 404 Not Found 状态代码。 红色条用于表示资产的请求总数。

> [!NOTE]
> 出于本报告的目的，请注意以下事项：
> 
> * 命中代表对资产的任何请求，而不考虑状态代码。
> * 边缘 CNAME URL 将转换为等效的 CDN URL。 这样便可以对与资产相关联的所有统计信息进行精确计数，而不管用于请求它的是 CDN 或边缘 CNAME URL。
> 
> 

图表的左侧（y 轴）表示导致 404 Not Found 状态代码的前 10 个请求资产的文件名。 在图形（x 轴）的正下方，会看到表示请求总数和导致 404 Not Found 状态代码的请求数的标签。

在条形图正下方，将列出前 250 个最常请求资产的以下信息：相对路径（包括文件名）、导致 404 Not Found 状态代码的请求数、资产的总请求次数，以及导致 404 Not Found 状态代码的请求的百分比。

## <a name="see-also"></a>请参阅
* [Azure CDN 概述](cdn-overview.md)
* [Microsoft Azure CDN 中的实时统计信息](cdn-real-time-stats.md)
* [使用规则引擎重写默认 HTTP 行为](cdn-rules-engine.md)
* [分析边缘性能](cdn-edge-performance.md)


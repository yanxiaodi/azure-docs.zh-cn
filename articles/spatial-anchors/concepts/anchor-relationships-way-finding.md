---
title: 定位点关系和在 Azure 空间的定位点的方式查找 |Microsoft Docs
description: 了解有关定位点关系背后的概念模型。 了解如何连接空间内的定位点以及如何使用附近的 API 来实现的方式查找方案。
author: ramonarguelles
manager: vicenterivera
services: azure-spatial-anchors
ms.author: rgarcia
ms.date: 02/24/2019
ms.topic: conceptual
ms.service: azure-spatial-anchors
ms.openlocfilehash: 008269a5883750dc8899d896c101c6a05bf7e814
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/13/2019
ms.locfileid: "65969278"
---
# <a name="anchor-relationships-and-way-finding-in-azure-spatial-anchors"></a>定位点关系和在 Azure 空间的定位点的方式查找

通过使用定位点的关系，可以在空间中创建连接的定位点，然后询问以下问题：

* 是否有附近的定位点？
* 距离它们？

## <a name="examples"></a>示例

在类似这样的情况下，可以使用已连接的定位点：

* 在辅助角色需要完成涉及访问工业工厂中的不同位置的任务。 工厂每个位置上有空间的定位点。 HoloLens 或移动应用可帮助从一个位置的下一步指南工作线程。 应用程序首次索要附近空间定位点并提供辅助角色到下一个位置。 应用将直观地显示一般的方向和到下一个位置的距离。

* 博物馆创建公共的显示空间的定位点。 在一起，这些定位点构成的一小时概览博物馆的基本的公共显示。 在公开展示，访问者可以打开其移动设备上的博物馆的混合的现实应用。 然后在点周围的空间以查看在教程的常规方向和到其他公共显示距离其电话照相机。 在向公共显示将指导用户，应用更新的常规方向和距离，以帮助并指导用户。

## <a name="set-up-way-finding"></a>设置的方式查找

使用的应用程序使用的视线方向以及提供指导的定位点之间的距离*方法查找*。 不同于启用通过打开导航方式查找。 启用通过打开导航窗格中，用户可以围绕墙壁、 楼层之间以及通过的门。 使用的方式查找用户会收到有关目标的常规方向的提示。 但推断或空间的知识也可帮助用户可以浏览到目标的结构。

若要生成的方式查找体验，首先体验准备一个空格，并开发应用程序用户将与之交互。 以下是概念的步骤：

1. **规划空间**:决定方式查找体验的一部分的空间中的位置。 在我们方案中，工厂主管或博物馆游览处理协调器可能会决定要包含在方法查找体验中哪些位置。
2. **连接的定位点**:请访问所选的位置，以创建空间的定位点。 您可以执行此操作在最终用户应用程序的管理员模式下或在不同应用程序中完全。 将连接或与其他每个定位点。 服务维护这些关系。
3. **启动的最终用户体验**:用户运行应用，以找到的定位点，可以是任何所选位置中。 整体设计应确定用户可以在其中输入体验的位置。
4. **查找附近的定位点**:用户找到一个定位点后，应用程序可以请求附近的定位点。 此过程返回姿势设备与这些定位点之间。
5. **指导用户**:应用可以使用这些定位点的每个姿势要提供有关用户的常规方向和距离的指导。 例如，相机源应用程序中可能会显示一个图标和箭头来表示每个潜在目标，如下图所示。
6. **优化指南**:如用户走，应用程序可以定期计算设备和目标定位点之间新姿势。 应用程序将继续改进帮助用户到达目标的指南提示。

    ![下面举例说明如何应用可以显示的方式查找指南](./media/meeting-spot.png)

## <a name="connect-anchors"></a>连接的定位点

若要生成的方式查找体验，首先需要将定位点放置在所选位置。 在本部分中，我们将假定应用程序的管理员已完成这项工作。

### <a name="connect-anchors-in-a-single-session"></a>在单个会话中连接的定位点

若要连接的定位点：

1. 向的第一个位置，并使用 CloudSpatialAnchorSession 创建一个定位点。
2. 引导到第二个位置。 基础 MR/AR 平台跟踪移动。
3. 使用相同 CloudSpatialAnchorSession 创建定位点 B。 现在已连接 A 和 B 的定位点。 空间的定位点服务维护此关系。
4. 继续剩余的定位点的过程。

### <a name="connect-anchors-in-multiple-sessions"></a>连接在多个会话中的定位点

可以通过多个会话连接空间的定位点。 使用此方法，您可以创建一次连接某些定位点和更高版本创建并连接多个定位点。 

若要通过多个会话连接的定位点：

1. 应用程序中一个 CloudSpatialAnchorSession 创建一些的定位点。 
2. 在不同时间应用查找一个这些定位点 (例如，定位点 A) 通过使用新 CloudSpatialAnchorSession。
3. 引导到新位置。 基础的混合现实情况或增强现实平台跟踪移动。
4. 使用相同 CloudSpatialAnchorSession 创建定位点 C。 现在已连接 A、 B 和 C 的定位点。 空间的定位点服务维护此关系。

随着时间的推移，你可以继续此过程的更多的定位点和多个会话。

### <a name="verify-anchor-connections"></a>验证定位点的连接

应用可以验证，通过发出查询的附近的定位点来连接两个定位点。 当查询的结果包含目标定位点时，验证定位点连接。 如果未连接的定位点，应用程序可以尝试重新连接它们。 

以下是定位点可能无法进行连接的一些原因：

* 基础混合现实情况或增强现实平台连接的定位点的过程中丢失跟踪。
* 由于在与空间的定位点服务的通信网络错误，无法保留的定位点连接。

### <a name="find-sample-code"></a>查找示例代码

若要查找的示例代码，演示如何连接的定位点，以及如何执行邻近查询，请参阅[空间的定位点示例应用](https://github.com/Azure/azure-spatial-anchors-samples)。
